<div class="container">
  <mat-accordion class="headers-align">
    <mat-expansion-panel [ngStyle]="{'background-color':sessions[i].isInstructor ?  'white' : '#b2f6f8' }"
      [expanded]="step === i" (opened)="setStep(i)" hideToggle *ngFor="let session of sessions; let i = index;">
      <mat-expansion-panel-header [collapsedHeight]="'50px'" [expandedHeight]="'50px'">
        <div>
          <mat-panel-title class="title">
            <h5><b>{{session.title}}</b></h5>
          </mat-panel-title>
          <mat-panel-description class="instructor">
            {{session.instructor}}
          </mat-panel-description>
        </div>
        <span class="example-fill-remaining-space"></span>
        <div>
          <mat-panel-description class="session-date">
            {{session.sessionDate}}
          </mat-panel-description>
          <mat-panel-description class="capacity">
            {{session.subscribedCount}}/{{session.capacity}}
          </mat-panel-description>
        </div>

        <ng-template #content let-modal let-c="close" let-d="dismiss">
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Questionnaire</h4>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="ratings text-center">
            <form>
              <p>Como classifica a produtividade da sessão?</p>
              <label for="one">Baixa</label>
              <input type="radio" id="one" name="gender" value="1">
              <input type="radio" id="two" name="gender" value="2">
              <input type="radio" id="three" name="gender" value="3">
              <input type="radio" id="four" name="gender" value="4">
              <input type="radio" id="five" name="gender" value="5">
              <label for="five">Alta</label>
            </form>
            <form>
              <p>Na sua opinião os conteúdos são adequados?</p>
              <label for="one">Pouco</label>
              <input type="radio" id="one" name="maturity" value="1">
              <input type="radio" id="two" name="maturity" value="2">
              <input type="radio" id="three" name="maturity" value="3">
              <input type="radio" id="four" name="maturity" value="4">
              <input type="radio" id="five" name="maturity" value="5">
              <label for="five">Muito</label>
            </form>
            <form>
              <p>De um mode geral como classifica o desempenho do formador?</p>
              <label for="one">Mau</label>
              <input type="radio" id="one" name="friendliness" value="1">
              <input type="radio" id="two" name="friendliness" value="2">
              <input type="radio" id="three" name="friendliness" value="3">
              <input type="radio" id="four" name="friendliness" value="4">
              <input type="radio" id="five" name="friendliness" value="5">
              <label for="five">Bom</label>
            </form>
            <form>
              <p>O objetivo pretendido foi alcançado?</p>
              <label for="one">Não</label>
              <input type="radio" id="one" name="intelligence" value="1">
              <input type="radio" id="two" name="intelligence" value="2">
              <input type="radio" id="three" name="intelligence" value="3">
              <input type="radio" id="four" name="intelligence" value="4">
              <input type="radio" id="five" name="intelligence" value="5">
              <label for="five">Sim</label>
            </form>
          </div>
          <!-- OCCUPATION QUESTION -->
          <div class="occupation">
            <p>Na sua opinião há algo que pode melhorar na formação?</p>
           <textarea cols="50" rows="5"></textarea>
           <br>
            <input type="submit">
          </div>
        </ng-template>
        <div *ngIf="questionButton">
          <button type="button" class="btn btn-outline-primary" (click)="open(content)">Answer...</button>
        </div>

      </mat-expansion-panel-header>

      <!--       <mat-form-field>
        <input matInput placeholder="First name">
      </mat-form-field>
  
      <mat-form-field>
        <input matInput type="number" min="1" placeholder="Age">
      </mat-form-field> -->
      <mat-action-row *ngIf="uselessRows">
        <div class="left-aligned">
          <b>Instructor Info:</b> <br>
          {{session.instructorName}}
        </div>
        <span class="example-fill-remaining-space"></span>
        <div class="right-aligned">
          <div>
            {{session.location}}
          </div>
          <div>
            {{session.requirements}}
          </div>
        </div>
      </mat-action-row>
      <mat-action-row *ngIf="uselessRows">
        <span class="example-fill-remaining-space"></span>
        <div>
          Description
        </div>
        <span class="example-fill-remaining-space"></span>
      </mat-action-row>
      <mat-action-row class="row" *ngIf="sessions[i].isInstructor && sessions[i].subscribedCount > 0">
        <div *ngFor="let user of session.users; let y = index">
          <div *ngIf="y % 5 == 0">
            <!-- <div class="col-2">{{ session.users[y].name }}</div> -->
            <span class="ml-2" *ngIf="y + 1 < session.users.length">{{ session.users[y + 1].name }}</span>
            <span class="ml-2" *ngIf="y + 2 < session.users.length">{{ session.users[y + 2].name }}</span>
            <span class="ml-2" *ngIf="y + 3 < session.users.length">{{ session.users[y + 3].name }}</span>
            <span class="ml-2" *ngIf="y + 4 < session.users.length">{{ session.users[y + 4].name }}</span>
          </div>
        </div>
        <span class="example-fill-remaining-space"></span>
      </mat-action-row>
      <mat-action-row *ngIf="uselessRows">
        <div *ngIf="!sessions[i].isInstructor && subButtons">
          <div class="btn-group btn-group-toggle" *ngIf="!sessions[i].subscribed">
            <button mat-button color="primary" [disabled]="sessions[i].capacity == sessions[i].subscribedCount"
              (click)="sub(session.id, i)">Subscribe</button>
          </div>
          <div class="btn-group btn-group-toggle" *ngIf="sessions[i].subscribed">
            <button mat-button color="primary" (click)="unsub(i)">Unsubscribe</button>
          </div>
        </div>
        <span class="example-fill-remaining-space"></span>
        <button mat-button color="warn" *ngIf="step != 0" (click)="prevStep()">Previous</button>
        <button mat-button color="primary" *ngIf="step != sessions.length -1" (click)="nextStep()">Next</button>

      </mat-action-row>

    </mat-expansion-panel>


  </mat-accordion>
</div>